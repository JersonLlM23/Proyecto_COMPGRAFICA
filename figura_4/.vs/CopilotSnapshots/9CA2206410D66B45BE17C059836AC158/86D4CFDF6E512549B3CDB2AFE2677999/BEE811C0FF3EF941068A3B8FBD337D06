using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace figura_4
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnCalcular_Click(object sender, EventArgs e)
        {
            float radio = float.Parse(txtTamano.Text);
            float mitad = radio / 2;
            float parte_mitad = mitad / 5;
            float ancho = picCanvas.Width;
            float alto = picCanvas.Height;
            //centros
            float[] verticex_cuadrado2 = new float[6];
            float[] verticey_cuadrado2 = new float[6];
            float[,,] puntasx_hexa = new float[6, 6, 5];
            float[,,] puntasy_hexa = new float[6, 6, 5];
            float x = ancho / 2;
            float y = alto / 2;
            float angulo1 = (float)Math.PI;

            //lineas para los centros
            for (int i = 0; i < 6; i++)
            {
                verticex_cuadrado2[i] = x + (float)(mitad * Math.Sin(angulo1));
                verticey_cuadrado2[i] = y + (float)(mitad * Math.Cos(angulo1));
                angulo1 = angulo1 + ((float)Math.PI * 2 / 6);
            }

            // Llenar ambos arreglos simultáneamente
            for (int i = 0; i < 6; i++)  // hexágonos externos
            {
                for (int l = 0; l < 5; l++)  // anillos concéntricos
                {
                    float angulo2 = (float)Math.PI;
                    float radio_actual = parte_mitad * (l + 1);  // Radio para este anillo

                    for (int j = 0; j < 6; j++)  // vértices del hexágono
                    {
                        puntasx_hexa[i, j, l] = verticex_cuadrado2[i] + (float)(radio_actual * Math.Sin(angulo2));
                        puntasy_hexa[i, j, l] = verticey_cuadrado2[i] + (float)(radio_actual * Math.Cos(angulo2));
                        angulo2 = angulo2 + ((float)Math.PI * 2 / 6);
                    }
                }
            }

            //creacion de hexagonos pequeños segun su centro
            Graphics canvas = picCanvas.CreateGraphics();
            Pen lapiz = new Pen(Color.Black);

            // Dibujar líneas desde el centro al centro de cada hexágono
            for (int j = 0; j < 6; j++)
            {
                canvas.DrawLine(lapiz, x, y, verticex_cuadrado2[j], verticey_cuadrado2[j]);
            }
            for (int i = 0; i < 6; i++)  // Para cada hexágono externo
            {
                for (int l = 0; l < 5; l++)  // Para cada anillo concéntrico
                {
                    for (int j = 0; j < 6; j++)  // Para cada lado del hexágono
                    {
                        bool dibujar = false;

                        // Determinar qué lados dibujar según el hexágono
                        switch (i)
                        {
                            case 0: // Hexágono 0: dibujar lados 3,4,5,0 (omitir 1,2)
                                dibujar = (j == 3 || j == 4 || j == 5 || j == 0);
                                break;
                            case 1: // Hexágono 1: dibujar lados 4,5,0,1 (omitir 2,3)
                                dibujar = (j == 4 || j == 5 || j == 0 || j == 1);
                                break;
                            case 2: // Hexágono 2: dibujar lados 5,0,1,2 (omitir 3,4)
                                dibujar = (j == 5 || j == 0 || j == 1 || j == 2);
                                break;
                            case 3: // Hexágono 3: dibujar lados 0,1,2,3 (omitir 4,5)
                                dibujar = (j == 0 || j == 1 || j == 2 || j == 3);
                                break;
                            case 4: // Hexágono 4: dibujar lados 1,2,3,4 (omitir 5,0)
                                dibujar = (j == 1 || j == 2 || j == 3 || j == 4);
                                break;
                            case 5: // Hexágono 5: dibujar lados 2,3,4,5 (omitir 0,1)
                                dibujar = (j == 2 || j == 3 || j == 4 || j == 5);
                                break;
                        }

                        if (!dibujar)
                            continue;

                        int lado_siguiente = (j + 1) % 6;

                        canvas.DrawLine(lapiz,
                            puntasx_hexa[i, j, l], puntasy_hexa[i, j, l],
                            puntasx_hexa[i, lado_siguiente, l], puntasy_hexa[i, lado_siguiente, l]);
                    }
                }
            }

            lapiz.Dispose();
            canvas.Dispose();
        }

        private void grpBox_Enter(object sender, EventArgs e)
        {

        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void txtTamano_TextChanged(object sender, EventArgs e)
        {

        }
    }
}
